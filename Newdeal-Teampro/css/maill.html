<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>mail-form</title>
    <link rel="stylesheet" type="text/css" href="mail.css">
    <link rel="stylesheet" type="text/css" href="common.css">
</head>
<script>


</script>

<body>
    <div id="top">
        <input type="button" value="행추가!" onclick="rowAdd();">
        <input type="button" value="열추가!" onclick="colAdd();">
        <input type="button" value="행삭제!" onclick="rowDel();">
        <input type="button" value="열삭제!" onclick="rowDel();">
    </div>

    <table id="mail-form">
        <thead id="form-table"></thead>
        <tr>
            <td>
                <input type="file" name="opt[0][]" accept="image/*">
                <input type="text" name="opt[0][]">
                <textarea id="explain" name ="opt[0][]" placeholder="추가 내용을 입력하여 주세요."></textarea>
            </td>
        </tr>
    </table>
    <div id="bott">
        <button id="mail-prev">미리보기</button>
        <button id="mail-submit">확인</button>
    </div>
    <script>
var form_table = document.getElementById('form_table');
var form_thead = document.getElementById('form_thead');
var form_tbody = document.getElementById('form_tbody');
var form_tr = null;
var form_td = null;
var form_x = 0;
var form_y = 0;
var msg = document.getElementById('msg');
        
function rowAdd() 
{
    // 행 제목 추가
    form_tr = document.createElement('tr');
    form_tbody.appendChild(form_tr);
    form_td = document.createElement('td');
    form_tr.appendChild(form_td);
    add_input('opty_subj[]');
    form_y++;

    // 열의 갯수에 따라 추가된 행의 열 추가
    var form_thead_td = form_thead.getElementsByTagName('td');
    for (i=0; i< form_thead_td.length-1; i++)
    {
        form_td = document.createElement('td');
        form_tr.appendChild(form_td);
        add_input('['+form_y+'][]');
    }
}

function colAdd() 
{
    // 열 제목 추가
    var stock_thead_tr = form_thead.getElementsByTagName('tr');
    form_td = document.createElement('td');
    form_thead_tr[0].appendChild(form_td);
    add_input('optx_subj[]');

    var form_tbody_tr = stock_tbody.getElementsByTagName('tr');
    for (i=0; i<form_tbody_tr.length; i++) {
        form_td = document.createElement('td');
        form_tbody_tr[i].appendChild(form_td);
        add_input('opt['+i+'][]');
    }
}

function add_input(name)
{
    var inp = document.createElement('input');
    inp.setAttribute('type', 'text');
    inp.setAttribute('size', '10');
    inp.setAttribute('name', name);
    form_td.appendChild(inp);
}

function del_row()
{
    var form_tbody_tr = form_tbody.getElementsByTagName('tr');
    if (form_tbody_tr.length > 1) {
        form_tbody.deleteRow(form_tbody_tr.length-1);
        form_y--;
    }
}

function del_col()
{
    var form_thead_tr = form_thead.getElementsByTagName('tr');
    var form_thead_td = form_thead.getElementsByTagName('td');
    if (form_thead_td.length > 2) {
        form_thead_tr[0].deleteCell(form_thead_td.length-1);

        var form_tbody_tr = form_tbody.getElementsByTagName('tr');
        for (i=0; i<form_tbody_tr.length; i++) {
            var tr_td = stock_tbody_tr[i].getElementsByTagName('td');
            form_tbody_tr[i].deleteCell(tr_td.length-1);
        }
    }
}

    </script>
</body>

</html>
