<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>폼 추가/삭제 예제</title>
    <title>mail-form</title>
    <link rel="stylesheet" type="text/css" href="maill.css">
    <link rel="stylesheet" type="text/css" href="common.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
</head>
<body onload="addForm();">
        <div id="mail-form">
            <input type="text" id="form-title" placeholder="[ TITLE ]">
            <div id="form-mail">
            <center>
                <form name="baseForm" action="" method="post">
                    <input type="hidden" name="count" value="0">
                    <div id="addedFormDiv"></div>
                    <br>
                    <input type="button" value="추가" onclick="addForm();">
                    <input type="button" value="삭제" onclick="delForm();">
                    <input type="Submit" value="완료">
                </form>
            <div id="bott">
               <center>
                <button id="mail-prev" onclick="addForm()">미리보기</button>
                <button id="mail-submit" onclick="delForm()">확인</button>
                </center>
            </div>
            </center>
            </div>
            </div>
</body>
<script src='node_modules/jquery/dist/jquery.js'></script>
<script src="node_modules/blueimp-file-upload/js/vendor/jquery.ui.widget.js"></script>
<script src="node_modules/blueimp-file-upload/js/jquery.iframe-transport.js"></script>
<script src="node_modules/blueimp-file-upload/js/jquery.fileupload.js"></script>

<script>
"use strict"
var count = 0;

function addForm() {
    var addedFormDiv = document.getElementById("addedFormDiv");
    var str = "";
    str += `<div id="card">\
        <form>\
        <label for="image">상품정보 : </label>\
        <input type="file" id="image" onchange="imgprev(this);" accept="image/*" />\
        </form>\
        <img src="#" id="imageprev"/>\
        <div id="preview">\
        <a href="#" id="imgdel">[상품사진 삭제하기]</a>\
        <input type="text" class="title" accept="image/*">\
        <textarea class="explain" rows="5"cols="30" placeholder="추가 설명을 입력해주세요..">\</textarea>\
        </div>\
        <center>\
        </div>`

    var addedDiv = document.createElement("div");
    addedDiv.id = "added_" + count;
    addedDiv.innerHTML = str;
    addedFormDiv.appendChild(addedDiv);
    count++;
    document.baseForm.count.value = count;
}

function delForm() {
    var addedFormDiv = document.getElementById("addedFormDiv");
    if (count > 1) {
        var addedDiv = document.getElementById("added_" + (--count));
        addedFormDiv.removeChild(addedDiv);
    } else {
        document.baseForm.reset();
    }
}
function imgprev(input){
    if(input.files && input.files[0]){
        var fildr = new FileReader();
        fildr.onload = function(e){
            $("#imageprev").attr('src', e.target.result);
        }
        fildr.readAsDataURL(input.files[0]);
    }
}
$('#imgdel').click(()=>{
    $('#imgaeprev').remove();
})

$('#image').click(()=>{
    for( var i = 1; i<=9; i++)
        console.log(i)
})
        </script>





